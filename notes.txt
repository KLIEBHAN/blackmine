# Redmine Clone - Status Notes


## Letzte Iteration (2026-01-12)
- **DRY: formatDate() Utility zentralisiert**
  - Neue Funktion in `src/lib/utils.ts`: `formatDate(date, format)`
  - 4 Format-Typen: `'short'`, `'medium'`, `'long'`, `'datetime'`
  - 7 Dateien bereinigt:
    - `issue-detail.tsx` (3 Aufrufe, 2 lokale Funktionen entfernt)
    - `comments.tsx` (1 Aufruf, 1 lokale Funktion entfernt)
    - `issues-list.tsx` (1 Aufruf)
    - `issues-table.tsx` (1 Aufruf)
    - `users-list.tsx` (1 Aufruf)
    - `time-list.tsx` (1 Aufruf)
    - `project-detail.tsx` (3 Aufrufe)
  - ~40 Zeilen duplizierten Code entfernt

## Vorherige Iterationen
- **DRY: TrackerIcon Komponente zentralisiert** (2 Dateien)
- **DRY: Ungenutzte SortDirection Re-Exports entfernt** (4 lib Dateien)
- **DRY: SortDirection in time-list.tsx** (lokale Definition entfernt)
- **DRY: Enum-Arrays zentralisiert** (`allIssueStatuses`, etc. in types/index.ts)
- **DRY: `SortIcon` Komponente zentralisiert** (3 Dateien, ~30 Zeilen)
- **DRY: `getInitials()` zentralisiert** (7 Dateien, ~50 Zeilen)
- **DRY: Label-Konstanten zentralisiert** (statusLabels, trackerLabels, etc.)
- **Markdown Rendering:** Issue-Beschreibungen und Kommentare
- **Performance:** `issues-list.tsx` - `toIssue()` Mapping in separates `useMemo`
- **Dark Mode:** System-Präferenz + Persistenz
- **Lesbarkeit/DRY:** toggle-Funktionen konsolidiert
- README.md projektspezifisch aktualisiert
- Test Coverage: **98.51%** (weit über Ziel 35%)

## PRD-Tasks Status:
- [x] Test Coverage auf 35% -> **98.51% erreicht!**
- [x] Dokumentation verbessern -> README.md aktualisiert
- [x] Code Quality / SortDirection DRY -> vollständig zentralisiert
- [x] Bug hunt (1 Code Smell gefixed: unsicherer Type Cast)
- [x] Lesbarkeit: toggle-Funktionen DRY gemacht
- [x] Performance-Optimierungen -> useMemo für toIssue() separiert
- [x] Design optimieren (Dark mode) -> System-Präferenz + Persistenz
- [x] Markdown in Issues rendern
- [x] Kommentare löschbar
- [x] DRY: getInitials() zentralisiert
- [x] DRY: TrackerIcon zentralisiert
- [x] DRY: formatDate() zentralisiert

## Bekannte TODOs im Code
- `src/app/time/new/time-entry-form.tsx:106` - Get actual user ID from auth context
- `src/app/issues/new/issue-form.tsx:119` - Get from auth context
(Diese sind architekturelle Platzhalter für Auth-System, kein Bug)

## Weitere DRY-Kandidaten (identifiziert, noch nicht umgesetzt)
- Server Action Error Handler: 13+ identische catch-Blöcke
- Server Action revalidatePath: Wiederholende Calls
- Unique-Check Functions: `isIdentifierTaken` / `isEmailTaken` ähnlich

## Nächste Schritte
- Server Action Error Handler DRY machen
- Auth vollständig implementieren
- UX verbessern
- Administration (Settings) Implementieren

---
Letzte Aktualisierung: 2026-01-12
