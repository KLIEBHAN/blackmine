## 2026-01-19: Implement updateIssueStatus Server Action

### Completed
- Created `updateIssueStatus` Server Action in `src/app/actions/issues.ts`
  - Validates status against allowed values: new, in_progress, resolved, closed, rejected
  - Returns specific error for invalid status
  - Returns specific error when issue not found (Prisma P2025)
  - Revalidates issue list and detail pages on success

- Created unit tests in `src/app/actions/issues.test.ts`
  - Tests successful status update
  - Tests rejection of invalid status values
  - Tests error handling for non-existent issues
  - Tests all valid status values using parameterized tests

### Test Results
- 8 tests passing

### Files Changed
- src/app/actions/issues.ts (added updateIssueStatus function)
- src/app/actions/issues.test.ts (new file)
- PRD.md (marked first task complete)

## 2026-01-19: Add Status-Dropdown to Issue-Sidebar

### Completed
- Replaced static Badge with Select dropdown in `src/app/(app)/issues/[id]/issue-sidebar.tsx`
  - Uses shadcn/ui Select component from `@/components/ui/select`
  - Calls `updateIssueStatus` server action on value change
  - Uses `useTransition` for loading state (disabled during update)
  - Shows success/error toast via `sonner`
  - Displays all 5 status options with appropriate styling

### Test Results
- All 247 tests passing
- Lint: 0 errors (2 pre-existing warnings unrelated to this change)

### Files Changed
- src/app/(app)/issues/[id]/issue-sidebar.tsx (replaced Badge with Select)
- PRD.md (marked second task complete)

## 2026-01-19: Mark Unit Tests Task as Complete

### Summary
The unit tests for `updateIssueStatus` were already implemented in a previous session but the PRD task was not marked complete. Verified that all required test cases are covered:

1. ✅ Successful status update
2. ✅ Invalid status rejection
3. ✅ Non-existent issue error handling
4. ✅ All 5 valid status values tested via parameterized tests

### Test Results
- 8 tests passing
- Lint: 0 errors (2 pre-existing warnings)

### Files Changed
- PRD.md (marked third task complete)

### Status
All PRD tasks are now complete.

## 2026-01-19: Add Status Field to Issue-Edit-Form

### Completed
- Added status field to Issue-Edit-Form (`src/app/(app)/issues/[id]/edit/issue-edit-form.tsx`)
  - Extended `FormData` type to include `status: IssueStatus`
  - Initialized status from `issue.status`
  - Added Select dropdown for status (placed after Tracker in a 3-column grid)
  - Status dropdown shows all 5 status options with appropriate styling
  - Status is passed to `updateIssue` server action on form submit

- Extended `updateIssue` Server Action in `src/app/actions/issues.ts`
  - Added `status` field to `IssueFormData` type
  - Added validation: rejects invalid status values against `allIssueStatuses`
  - Returns error with `{ errors: { general: "Invalid status: ..." } }` for invalid status

- Added unit tests for `updateIssue` with status in `src/app/actions/issues.test.ts`
  - Tests successful status update via `updateIssue`
  - Tests rejection of invalid status values
  - Tests all 5 valid status values using parameterized tests

### Test Results
- 254 tests passing (15 in issues.test.ts)
- Lint: 0 errors (2 pre-existing warnings unrelated to this change)

### Files Changed
- src/app/(app)/issues/[id]/edit/issue-edit-form.tsx (added status select)
- src/app/actions/issues.ts (added status to IssueFormData, added validation)
- src/app/actions/issues.test.ts (added tests for updateIssue with status)
- PRD.md (marked tasks 4 and 5 complete)

### Status
All PRD tasks are now complete.
