services:
  app:
    build: .
    ports:
      - "41316:3000"
    environment:
      - DATABASE_URL=file:/app/data/redmine.db
    volumes:
      - redmine-data:/app/data
    restart: unless-stopped

volumes:
  redmine-data:
    # Named volume persists across container rebuilds.
    # Data survives: docker compose build, up --build, down + up
    # Data deleted: docker compose down -v (explicit volume removal)
    # Backup: docker compose exec app cat /app/data/redmine.db > backup.db
